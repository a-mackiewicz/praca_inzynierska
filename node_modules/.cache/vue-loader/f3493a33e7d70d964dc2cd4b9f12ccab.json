{"remainingRequest":"D:\\inzynierka\\projekt\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\inzynierka\\projekt\\src\\components\\ListPatients.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\inzynierka\\projekt\\src\\components\\ListPatients.vue","mtime":1617275799209},{"path":"D:\\inzynierka\\projekt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\inzynierka\\projekt\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\inzynierka\\projekt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\inzynierka\\projekt\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmF4aW9zLmRlZmF1bHRzLndpdGhDcmVkZW50aWFscyA9IHRydWU7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIFBhdGllbnRzOiBbXSwKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICBsZXQgYXBpVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9hcGkvcGF0aWVudHMnOwogICAgICAgIGF4aW9zLmdldChhcGlVUkwsIHt3aXRoQ3JlZGVudGlhbHM6IHRydWV9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuUGF0aWVudHMgPSByZXMuZGF0YTsKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIH0pOwogICAgfSwKICAgIG1vdW50ZWQoKXsKICAgICAgICB0aGlzLiRwYXJlbnQuc2V0TWVzc2FnZSgwKTsKICAgICAgICB0aGlzLiRwYXJlbnQuc3RhdGUgPSAxOwogICAgICAgIHRoaXMuJHBhcmVudC5jaGFuZ2VOYXYoKTsKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIGFjdGl2ZVBhdGllbnRzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuUGF0aWVudHMuZmlsdGVyKGZ1bmN0aW9uKGkpIHsKICAgICAgICAgICAgICAgIGlmKGkuc3RhdGUgIT09ICcnKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5zdGF0ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGRlbGV0ZVBhdGllbnRzKGlkKXsKICAgICAgICAgICAgbGV0IGFwaVVSTCA9IGBodHRwOi8vbG9jYWxob3N0OjQwMDAvYXBpL2RlbGV0ZS1wYXRpZW50LyR7aWR9YDsKCiAgICAgICAgICAgIGlmICh3aW5kb3cuY29uZmlybSgiQ2hjZXN6IHVzdW7EhcSHIHBhY2plbnRhPyIpKSB7CiAgICAgICAgICAgICAgICBheGlvcy5kZWxldGUoYXBpVVJMKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbGlzdF9wYXRpZW50cycpOwogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgfQp9Cg=="},{"version":3,"sources":["ListPatients.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListPatients.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"row\"> \r\n        <div class=\"col-md-12 p-0\">\r\n            \r\n            <div class=\"table-responsive\">\r\n            <table class=\"table table-hover table-sm align-self-end mb-0\"  style=\"margin-top:0px;margin-bottom: 0;table-layout: fixed;\">\r\n                <thead class=\"text-light\" style=\"background-color: #8b0000;\">\r\n                    <tr>\r\n                        <th style=\"width:50px\">Lp.</th>\r\n                        <th>Imie</th>\r\n                        <th>Nazwisko</th>\r\n                        <th>Płeć</th>\r\n                        <th>Wiek</th>\r\n                        <th>Pesel</th>\r\n                        <th>Numer telefonu</th>\r\n                        <th>Status</th>\r\n                        <th style=\"width:200px\">Opcje</th>\r\n                    </tr>\r\n                </thead>\r\n            </table>\r\n            </div>\r\n            \r\n            <div id=\"divPatientList\" class=\"table-responsive\" style=\"height: calc(100vh - 371.6px);\">\r\n            <table class=\"table table-hover table-sm mb-0\" style=\"table-layout: fixed;\">\r\n                <tbody>\r\n                    <tr v-for=\"(patient, index) in Patients\" :key=\"patient._id\" >\r\n                        <td style=\"width:50px\">{{ ++index }}</td>\r\n                        <td>{{ patient.name }}</td>\r\n                        <td>{{ patient.surname }}</td>\r\n                        <td>{{ patient.gender }}</td>\r\n                        <td>{{ patient.age }}</td>\r\n                        <td>{{ patient.pesel }}</td>\r\n                        <td>{{ patient.phone }}</td>\r\n                        <td>{{ patient.state }}</td>\r\n                        <td style=\"width:200px\">\r\n                            <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\r\n                            <router-link :to=\"{name: 'patient', params: { id: patient._id }}\" class=\"btn btn-sm btn-dark\">Wejdź\r\n                            </router-link>\r\n                            <button @click.prevent=\"deletePatients(patient._id)\" class=\"btn btn-sm btn-warning\">Usuń pracjenta</button>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import axios from \"axios\";\r\n    axios.defaults.withCredentials = true;\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                Patients: [],\r\n            }\r\n        },\r\n        created() {\r\n            let apiURL = 'http://localhost:4000/api/patients';\r\n            axios.get(apiURL, {withCredentials: true}).then(res => {\r\n                this.Patients = res.data;\r\n            }).catch(error => {\r\n                console.log(error)\r\n            });\r\n        },\r\n        mounted(){\r\n            this.$parent.setMessage(0);\r\n            this.$parent.state = 1;\r\n            this.$parent.changeNav();\r\n        },\r\n        computed: {\r\n            activePatients: function() {\r\n                return this.Patients.filter(function(i) {\r\n                    if(i.state !== ''){\r\n                        return i.state;\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        methods: {\r\n            deletePatients(id){\r\n                let apiURL = `http://localhost:4000/api/delete-patient/${id}`;\r\n\r\n                if (window.confirm(\"Chcesz usunąć pacjenta?\")) {\r\n                    axios.delete(apiURL).then(() => {\r\n                    this.$router.push('/list_patients');\r\n                    window.location.reload();\r\n                    }).catch(error => {\r\n                        console.log(error)\r\n                    });\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .btn-success {\r\n        margin-right: 10px;\r\n    }\r\n</style>"]}]}